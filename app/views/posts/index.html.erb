<h1>Posts</h1>
<% if !session[:user_id] %>
<%= link_to("Sign up", new_user_path) %> or
<% end %>
<% if session[:user_id] %>Signed in as <%= @user %><% end %> <%= link_to_if(session[:user_id], "Log out", logout_path) do link_to("Log in", login_path) end %>

<br>

<%= link_to("Add post", new_post_path) %>
	<% @posts.each_with_index do |post, i| %>
	<div id="post-<%= post.id %>" class="clearfix post-container">
    <span class="post-index">
      <%= i + 1 %>
    </span>
    <span class="post-vote-rank">
      <div class="post-vote">
        <div><%= link_to "&#x25B2;".html_safe, upvote_post_path(post), method: 'put', remote: 'true' %></div>
        <div><%= link_to "&#x25BC;".html_safe, downvote_post_path(post), method: 'put', remote: 'true' %></div>
      </div>
      <div class="post-rank">
        <%= post.upvote - post.downvote %>
      </div>
    </span>
    <span class="post-info">
  		<%= display_url_link(post) %>
  		<% if post.type_of_post == 1 %>
      <span class="site">(<%= post.url.split('/')[2] %>)</span>
      <% end %>
  		<br>

  		<span class="total-upvotes-downvotes">
        (<span class="upvote"><%= post.upvote %></span> | <span class="downvote"><%= post.downvote  %></span>)
      </span>
      <span class="time-ago">submitted <%= time_ago_in_words(post.created_at) %> ago</span>
      <span>by <%= post.user.handle %></span><br>

  		<%= link_to(pluralize(post.comments.count, 'comment'), post) %>
    </span>
	</div>
	<% end %>
</ol>