<% if !@current_user %>
<%= link_to("Sign up", new_user_path) %> or
<% end %>
<% if @current_user %>Signed in as <%= link_to @current_user_handle, user_profile_path(@current_user_handle) %><% end %> <%= link_to_if(@current_user, "Log out", logout_path) do link_to("Log in", login_path) end %>

<br>

<%= link_to "Create category", new_category_path %> | <%= link_to "Add post", new_post_path %>
<% @posts.each_with_index do |post, i| %>
<div id="post-<%= post.id %>" class="clearfix post-container">
  <span class="post-index">
    <%= i + 1 %>
  </span>
  <span class="post-vote-rank">
    <div class="post-vote">
      <div><%= link_to "&#x25B2;".html_safe, post_votes_path(post, vote: true), method: "post", remote: "true" %></div>
      <div><%= link_to "&#x25BC;".html_safe, post_votes_path(post, vote: false), method: "post", remote: "true" %></div>
    </div>
    <div class="post-rank">
      <%= post.total_votes %>
    </div>
  </span>
  <span class="post-info">
    <%= display_url_link(post) %>
    <% if post.type_of_post == 1 %>
    <span class="site">(<%= post.url.split('/')[2] %>)</span>
    <% end %>
    <br>

    <span class="total-upvotes-downvotes">
      (<span class="upvote"><%= post.upvotes %></span> | <span class="downvote"><%= post.downvotes %></span>)
    </span>
    <span class="time-ago">submitted <%= time_ago_in_words(post.created_at) %> ago</span>
    <span class="post-author">by <%= link_to post.user.handle, user_profile_path(post.user.handle) %></span>
    <span class="post-category">to <%= post.category.name %>

    <br>

    <%= link_to(pluralize(post.comments.count, 'comment'), post) %>
  </span>
</div>
<% end %>